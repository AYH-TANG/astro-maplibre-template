---
import fs from "fs";
import yaml from "js-yaml";
import type { ContentBlock, MapBlock, MixedBlock } from "@types";
import {default as Map} from "../components/Map.astro";
// Load and parse the YAML file
const fileContents = fs.readFileSync(
  "src/pages/_inline_map_components.yaml",
  "utf8"
);
const pageData = yaml.load(fileContents) as { blocks: ContentBlock[] };

const {blocks} = pageData;


// pass pagedata as props
export interface Props {
  blocks: ContentBlock[];
}

---

<div class="inline-maps-container">
<main>
  {blocks.map((block, index) => {
    if (block.type == "map") {
      return (
        <div id={`${block.type}-${index}`} class="inline-map">
          <Map block={block.content as MapBlock} />
        </div>
      );
    } else {
      return null;
    }
  })}
</main>

</div> 